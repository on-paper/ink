---
title: Architecture
description: Technical architecture and design principles of Paper
---

import { Callout } from 'fumadocs-ui/components/callout';

# Architecture

Paper's architecture is designed for scalability, decentralization, and optimal user experience.

## System Overview

```
┌─────────────────────────────────────────────────────────┐
│                     Frontend (Next.js)                  │
├─────────────────────────────────────────────────────────┤
│                    State Management                     │
│                   (Redux + React Query)                 │
├─────────────────────────────────────────────────────────┤
│                     Web3 Integration                    │
│                    (Wagmi + Viem + EIK)                 │
├─────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐      │
│  │     ENS     │  │     EFP     │  │     ECP     │      │
│  └─────────────┘  └─────────────┘  └─────────────┘      │
├─────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐      │
│  │    IPFS     │  │   Arweave   │  │   Grove     │      │
│  └─────────────┘  └─────────────┘  └─────────────┘      │
└─────────────────────────────────────────────────────────┘
```

## Core Components

### ENS (Ethereum Name Service)

ENS provides human-readable addresses and decentralized profiles

### EFP (Ethereum Follow Protocol)

EFP manages the social graph

### ECP (Ethereum Comments Protocol)

ECP handles decentralized comments with optional gasless transactions

## Storage Architecture

### Content Storage Strategy

<Callout type="info">
IPFS and Arweave integrations are coming soon
</Callout>

#### IPFS (InterPlanetary File System)
- Primary content storage
- Content-addressed for integrity
- P2P distribution

#### Arweave
- Permanent backup storage
- Pay-once, store-forever model
- Critical content preservation

#### Grove
- Structured data management
- Metadata organization
- Cross-platform compatibility


## Gasless Transactions

Paper implements ECP sponsored transactions for improved UX

### Approval Criteria

Users qualify for gasless transactions based on:
- ENS name ownership
- Community reputation
- Stake amount
- Activity level

## API Architecture

### RESTful Endpoints

```
/api/posts
  GET    - Fetch posts feed
  POST   - Create new post

/api/users/[address]
  GET    - Fetch user profile
  PUT    - Update profile

/api/notifications
  GET    - Fetch notifications
  POST   - Mark as read
```

### Data Flow

1. **Client Request**: Frontend sends API request
2. **Validation**: Request validation and auth check
3. **Blockchain Query**: Fetch on-chain data if needed
4. **IPFS Retrieval**: Get content from IPFS
5. **Response**: Return formatted data

## Security Considerations

### Smart Contract Security
- Minimal on-chain logic
- Audited protocols (ENS, EFP, ECP)
- Upgradeable proxy patterns

### Frontend Security
- Input sanitization
- XSS prevention
- CORS configuration
- Rate limiting

### Private Key Management
- Client-side signing only
- No private key storage
- Hardware wallet support

## Performance Optimizations

### Caching Strategy
- CDN for static assets
- Redis for API responses
- IPFS gateway caching
- Browser cache headers

### Bundle Optimization
- Code splitting
- Lazy loading
- Tree shaking
- Image optimization

### Database Indexing
- Graph Protocol for queries
- Custom indexers for feeds
- Efficient pagination

## Monitoring & Analytics

### Application Monitoring
- Error tracking with Sentry
- Performance monitoring
- User analytics (privacy-preserving)

### Blockchain Monitoring
- Transaction status tracking
- Gas price optimization
- Network health checks

## Deployment Architecture

### Infrastructure
- Vercel for frontend hosting
- IPFS nodes for content
- Redis for caching
- PostgreSQL for indexing

### CI/CD Pipeline
1. Code push to GitHub
2. Automated testing
3. Build optimization
4. Deployment to staging
5. Production release

## Future Considerations

### Scalability
- Layer 2 integration
- Sharding for data
- P2P content delivery

### Decentralization
- Fully decentralized hosting
- DAO governance
- Protocol ossification